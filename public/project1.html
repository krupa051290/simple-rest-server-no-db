<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Case</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
     <link rel="stylesheet" type="text/css" href="stylesheets/ex1.css">
</head>
<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Store</a>
    </div>
    <ul class="nav navbar-nav">
      <li class="active"><a href="#">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Catlog</a></li> 
      <li><a href="#">Contact</a></li> 
    </ul>
  </div>
</nav>
<div class="container">
 
     <div class="row">
    <div class="col-sm-4">
            <div class="list-group">
              <a href="#" class="list-group-item active">Cras Justo Odio</a>
              <a href="#" class="list-group-item">Dapibus ac facilisis in</a>
              <a href="#" class="list-group-item">Third item</a>
            </div>
         
         </div>
    <div class="col-sm-8">
        <form class="form-inline" role="form"> 
            <div class="form-group">
                <label for="search">Search</label> 
                <input type="search" class="form-control" placeholder="Search">
            
            </div>
            
          <div class="form-group">
              <label for="additem">Add Item</label>
                    
                <input type="text" class="form-control" placeholder="Item name" id="itemname">
                <input type="text" class="form-control" placeholder="Description" id="desc">
                <input type="text" class="form-control" placeholder="Price" id="price">
                <button type="button" class="btn btn-default" id="add">Add</button>
 
              
            </div>
        </form>  
        <div id="addeditems">
<!--
        <div class="well well-lg">
            <div><h3>Soccerball</h3>
                 <p id="delete" class="pull-right"><span class="glyphicon glyphicon-remove-sign a"></span></p>
               <span class="label label-primary pull-right a">10.99</span>
            </div>
        <h6>Fifa approved size and weight</h6>
        </div>
-->
        </div>
    </div>
  </div>
</div>

    <script>
        $(document).ready(function(){
            
              $.ajax({
                        type: "GET",
                        url: "/products", 
                
                        success: function(result){
                            console.log(""+result);
                         
                            var appendTo="";
                        $.each(result, function(i,obj){

                            appendTo += "<div class='well well-lg'><div><h3>"+obj.itemname+"</h3> <p id='delete' class='pull-right'><span class='glyphicon glyphicon-remove-sign a' id='"+obj.id+"'></span></p><span class='label label-primary pull-right a'>"+obj.price+"</span></div><h6>"+obj.desc+"</h6></div>";
                            
                            
                        });
                            $("#addeditems").append(appendTo);
                    }
                  });
            
            
                      $("#add").on("click", function(){
            
                var items = new Object();
                items.itemname = $("#itemname").val();
                items.desc = $("#desc").val();
                items.price = $("#price").val();
                
                var appendTo;
                  $.ajax({
                        type: "POST",
                        url: "/products", 
                        data: items,
                        success: function(result){
                        
                appendTo = "<div class='well well-lg'><div><h3>"+result.itemname+"</h3> <p id='delete' class='pull-right'><span class='glyphicon glyphicon-remove-sign a' id='"+result.id+"'></span></p><span class='label label-primary pull-right a'>"+result.price+"</span></div><h6>"+result.desc+"</h6></div>";
                 
                       $("div#addeditems:last").append(appendTo);       
                    }
                    
                  });
            
            });
        
        
            
            $("#addeditems").on("click", ".glyphicon", function(){
            
              var id =  $(this).attr('id');
                $(this).closest('div.well').remove();
                
                $.ajax({
              
                    type: "DELETE",
                    url: "/products/"+id,
                  success: function(result){
                       
                    }
                });
            });
        
        });
    
    </script>
</body>
</html>
